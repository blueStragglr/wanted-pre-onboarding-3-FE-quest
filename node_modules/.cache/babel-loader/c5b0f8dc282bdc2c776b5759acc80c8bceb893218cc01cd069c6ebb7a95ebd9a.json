{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.recoilPersist = void 0;\n/**\n * Recoil module to persist state to storage\n *\n * @param config Optional configuration object\n * @param config.key Used as key in local storage, defaults to `recoil-persist`\n * @param config.storage Local storage to use, defaults to `localStorage`\n */\nconst recoilPersist = function () {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (typeof window === 'undefined') {\n    return {\n      persistAtom: () => {}\n    };\n  }\n  const {\n    key = 'recoil-persist',\n    storage = localStorage\n  } = config;\n  const persistAtom = _ref => {\n    let {\n      onSet,\n      node,\n      trigger,\n      setSelf\n    } = _ref;\n    if (trigger === 'get') {\n      const state = getState();\n      if (typeof state.then === 'function') {\n        state.then(s => {\n          if (s.hasOwnProperty(node.key)) {\n            setSelf(s[node.key]);\n          }\n        });\n      }\n      if (state.hasOwnProperty(node.key)) {\n        setSelf(state[node.key]);\n      }\n    }\n    onSet(async (newValue, _, isReset) => {\n      const state = getState();\n      if (typeof state.then === 'function') {\n        state.then(s => updateState(newValue, s, node.key, isReset));\n      } else {\n        updateState(newValue, state, node.key, isReset);\n      }\n    });\n  };\n  const updateState = (newValue, state, key, isReset) => {\n    if (isReset) {\n      delete state[key];\n    } else {\n      state[key] = newValue;\n    }\n    setState(state);\n  };\n  const getState = () => {\n    const toParse = storage.getItem(key);\n    if (toParse === null || toParse === undefined) {\n      return {};\n    }\n    if (typeof toParse === 'string') {\n      return parseState(toParse);\n    }\n    if (typeof toParse.then === 'function') {\n      return toParse.then(parseState);\n    }\n    return {};\n  };\n  const parseState = state => {\n    if (state === undefined) {\n      return {};\n    }\n    try {\n      return JSON.parse(state);\n    } catch (e) {\n      console.error(e);\n      return {};\n    }\n  };\n  const setState = state => {\n    try {\n      if (typeof storage.mergeItem === 'function') {\n        storage.mergeItem(key, JSON.stringify(state));\n      } else {\n        storage.setItem(key, JSON.stringify(state));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  return {\n    persistAtom\n  };\n};\nexports.recoilPersist = recoilPersist;","map":{"version":3,"names":["Object","defineProperty","exports","value","recoilPersist","config","window","persistAtom","key","storage","localStorage","onSet","node","trigger","setSelf","state","getState","then","s","hasOwnProperty","newValue","_","isReset","updateState","setState","toParse","getItem","undefined","parseState","JSON","parse","e","console","error","mergeItem","stringify","setItem"],"sources":["/Users/johyeyeon/so-hyeppy/node_modules/recoil-persist/dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.recoilPersist = void 0;\n/**\n * Recoil module to persist state to storage\n *\n * @param config Optional configuration object\n * @param config.key Used as key in local storage, defaults to `recoil-persist`\n * @param config.storage Local storage to use, defaults to `localStorage`\n */\nconst recoilPersist = (config = {}) => {\n    if (typeof window === 'undefined') {\n        return {\n            persistAtom: () => { },\n        };\n    }\n    const { key = 'recoil-persist', storage = localStorage } = config;\n    const persistAtom = ({ onSet, node, trigger, setSelf }) => {\n        if (trigger === 'get') {\n            const state = getState();\n            if (typeof state.then === 'function') {\n                state.then((s) => {\n                    if (s.hasOwnProperty(node.key)) {\n                        setSelf(s[node.key]);\n                    }\n                });\n            }\n            if (state.hasOwnProperty(node.key)) {\n                setSelf(state[node.key]);\n            }\n        }\n        onSet(async (newValue, _, isReset) => {\n            const state = getState();\n            if (typeof state.then === 'function') {\n                state.then((s) => updateState(newValue, s, node.key, isReset));\n            }\n            else {\n                updateState(newValue, state, node.key, isReset);\n            }\n        });\n    };\n    const updateState = (newValue, state, key, isReset) => {\n        if (isReset) {\n            delete state[key];\n        }\n        else {\n            state[key] = newValue;\n        }\n        setState(state);\n    };\n    const getState = () => {\n        const toParse = storage.getItem(key);\n        if (toParse === null || toParse === undefined) {\n            return {};\n        }\n        if (typeof toParse === 'string') {\n            return parseState(toParse);\n        }\n        if (typeof toParse.then === 'function') {\n            return toParse.then(parseState);\n        }\n        return {};\n    };\n    const parseState = (state) => {\n        if (state === undefined) {\n            return {};\n        }\n        try {\n            return JSON.parse(state);\n        }\n        catch (e) {\n            console.error(e);\n            return {};\n        }\n    };\n    const setState = (state) => {\n        try {\n            if (typeof storage.mergeItem === 'function') {\n                storage.mergeItem(key, JSON.stringify(state));\n            }\n            else {\n                storage.setItem(key, JSON.stringify(state));\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    return { persistAtom };\n};\nexports.recoilPersist = recoilPersist;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}